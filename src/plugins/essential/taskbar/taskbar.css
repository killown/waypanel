/* Taskbar Precision - 3D Depth & Tactical Feel */

.taskbar-container {
  background-color: var(--color-bg-deep, #121212);
  border-radius: var(--radius-l, 14px);
  margin: 2px 6px;
  padding: 0;
  /* Outer elevation to lift the solid container off the wallpaper */
  box-shadow: 
    0 4px 15px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.03);
}

.taskbar {
  background: transparent;
  margin: 0;
  padding: 3px 5px;
}

.taskbar-button {
  border-radius: var(--radius-m, 10px);
  background-color: var(--color-bg-button-normal);
  color: var(--theme-fg-label-primary);
  border: none;
  margin: 0 3px;
  padding: 0 6px;
  min-height: 32px;
  
  /* 3D Skeuomorphic stack: Top highlight, Bottom shade, Drop shadow */
  box-shadow: 
    inset 0 1px 1px 0 rgba(255, 255, 255, 0.08),
    inset 0 -2px 2px 0 rgba(0, 0, 0, 0.3),
    0 4px 6px -1px var(--shadow-dark),
    0 0 2px 0 var(--color-shadow-lighter);

  /* Subtle curvature gradient */
  background-image: linear-gradient(to bottom, 
                                   rgba(255, 255, 255, 0.03), 
                                   rgba(0, 0, 0, 0.08));

  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.taskbar-button image {
  -gtk-icon-size: 20px;
  /* Filter adds depth specifically to the icon asset */
  filter: drop-shadow(0 2px 3px rgba(0,0,0,0.4));
}

.taskbar-button:hover {
  background-color: var(--color-bg-button-normal-hover);
  
  /* Increased elevation and accent glow */
  box-shadow: 
    inset 0 1px 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 1px 0 rgba(0, 0, 0, 0.2),
    0 0 0 1px var(--theme-status-accent),
    0 8px 16px -2px var(--shadow-dark),
    0 0 12px 0 var(--color-shadow-hue-bleed);
              
  transform: translateY(-2px);
}

.taskbar-button.focused {
  background-color: var(--theme-bg-selected-primary);
  /* "Internal glow" for active state */
  box-shadow: 
    inset 0 2px 4px 0 rgba(0, 0, 0, 0.4),
    inset 0 0 15px 0 rgba(255, 255, 255, 0.1),
    0 0 25px 0 var(--color-shadow-hue-bleed),
    0 0 0 1px var(--theme-status-accent);
  transform: translateY(-1px) scale(1.02);
}

.taskbar-button:active {
  background-color: var(--color-bg-button-normal-active);
  background-image: none;
  /* Recessed "pressed" effect */
  box-shadow: 
    inset 0 4px 8px 0 rgba(0, 0, 0, 0.6),
    inset 0 -1px 0 0 rgba(255, 255, 255, 0.05),
    0 1px 2px 0 rgba(255, 255, 255, 0.1);
              
  transform: translateY(1px) scale(0.96);
  transition-duration: 40ms;
}

/* Context Menu refinement */
popover.taskbar-context-menu contents {
  background-color: var(--color-bg-surface);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: var(--radius-l, 14px);
  box-shadow: 
    0 20px 40px -10px rgba(0, 0, 0, 0.8),
    0 0 0 1px rgba(255, 255, 255, 0.03);
  padding: 8px;
}

.taskbar-menu-item {
  border-radius: var(--radius-m, 8px);
  padding: 6px 12px;
  transition: all 150ms ease;
  color: var(--theme-text-primary);
}

.taskbar-menu-item:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--theme-status-accent);
}